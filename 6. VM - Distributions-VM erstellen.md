# Unsere Distributions-VM wird die 'centos' VM sein

## Lokale Namensauflösung (/etc/hosts)

```/etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.100.2    pfsense
192.168.100.3    snort suricata ids ips
192.168.100.10   centos ansible docker greenbone wazuh onion  <----
192.168.100.11   ubuntu ldap
192.168.100.12   fedora
192.168.100.13   debian
192.168.100.14   kali
```

Skript:
```powershell
cd C:\lab\vm\ps-scripts
```
```powershell
./create-centos-vm
```


# VM mit Kickstart Datei 'ks-centos.cfg' installieren

Manuell, beim Booten der neun VM Kickstart referenzieren:

Wenn du beim Linux-Bootvorgang schnell auf die "e"-Taste drückst, gelangst du in den GRUB (Grand Unified Bootloader) Bearbeitungsmodus.

> `linux /vmlinuz... inst.ks=http://192.168.100.2/automation/ks-centos.cfg`
>
> Ctrl+X

# Ansible

## Ansible implementieren

Es gibt 2 Arten von Ansible Teilnehmern:

* **Control Station**  = die Haupt-VM von welcher wir verteilen
* **Clients** = alle anderen VMs


## Ansible-Pakete auf CentOS Control Station installieren

```bash
sudo yum update -y
```
```bash
sudo yum install epel-release -y
```
```bash
sudo yum install ansible -y
```
```bash
$ansible --version
```

```bash
[lucian@centos ~]$ ansible --version
ansible [core 2.14.17]
  config file = /etc/ansible/ansible.cfg  <---- Konfigurationsordner
  configured module search path = ['/home/lucian/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3.9/site-packages/ansible
  ansible collection location = /home/lucian/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible
  python version = 3.9.20 (main, Sep  9 2024, 00:00:00) [GCC 11.5.0 20240719 (Red Hat 11.5.0-2)] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
```

Die Konfigurationsdateien sind im Ordner /etc/ansible/

```bash
[lucian@centos ~]$ cd /etc/ansible/
[lucian@centos ansible]$ ls -l
total 8
-rw-r--r--. 1 root root  614 May 23 21:53 ansible.cfg
-rw-r--r--. 1 root root 1175 May 23 21:53 hosts
drwxr-xr-x. 2 root root    6 May 23 21:53 roles
[lucian@centos ansible]$
```

* ansible.cfg: Konfigurationseinstellungen für Ansible.
* hosts: Inventardatei, die verwaltete Hosts auflistet.
* roles: Verzeichnis zur Organisation wiederverwendbarer Ansible-Rollen.

## Inventar-Liste vorbereiten

Hier notieren wir unsere VMs

```bash
sudo nano hosts
```
```plaintext
[firewall]
project-pfsense		ansible_host=192.168.100.2 ansible_user=admin

[clients]
project-ubuntus		ansible_host=192.168.1.100 ansible_user=lucian
project-centos		ansible_host=192.168.1.101 ansible_user=lucian
project-fedora		ansible_host=192.168.1.102 ansible_user=lucian
project-kali		ansible_host=192.168.1.103 ansible_user=lucian
project-debian		ansible_host=192.168.1.104 ansible_user=lucian
```





