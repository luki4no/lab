Source: [Wazuh - Deployment on Docker](https://documentation.wazuh.com/current/deployment-options/docker/index.html)

# Benutze VM

> 192.168.100.10   centos

# Anpassungen

Docker und Docker-Compose haben wir schon mit Greenbone implementiert. In diesem Dokument werde ich nur die auszuführenden Kommandos notieren; die Details finden wir auf der oben genannten öffentlichen Website.

# Docker-Host 'centos' vorbereiten
```bash
sudo sysctl -w vm.max_map_count=262144
```
```bash
echo 'vm.max_map_count = 262144' | sudo tee -a /etc/sysctl.conf
```

# Wazuh Docker-Bereitstellung (Einzelknoten)

## Klone das Wazuh-Repository auf dein System und starte die Installation. 

```bash
cd ~
```
```bash
git clone https://github.com/wazuh/wazuh-docker.git -b v4.9.2
```
```bash
cd ~/wazuh-docker/single-node/
```

## Generiere self-signed certificates für jeden Cluster-Knoten (ohne Proxy)

Wir haben ein Docker-Image erstellt, um die Zertifikatserstellung mit dem Wazuh-Certs-Gen-Tool zu automatisieren.

Führe den folgenden Befehl aus, um die gewünschten Zertifikate zu erhalten:

```bash
docker compose -f generate-indexer-certs.yml run --rm generator
```

Resultat:

```bash
[lucian@centos single-node]$ docker compose -f generate-indexer-certs.yml run --rm generator
WARN[0000] /home/lucian/wazuh-docker/single-node/generate-indexer-certs.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Creating 1/1
 ✔ Network single-node_default  Created                                                                                   0.2s
[+] Running 5/5
 ✔ generator Pulled                                                                                                       6.4s
   ✔ 17d0386c2fff Pull complete                                                                                           3.1s
   ✔ 7ce91ec7d1d3 Pull complete                                                                                           3.7s
   ✔ 5249716d429c Pull complete                                                                                           3.7s
   ✔ d7003467fd14 Pull complete                                                                                           3.8s
The tool to create the certificates exists in Packages-dev bucket
30/11/2024 21:32:31 INFO: Generating the root certificate.
30/11/2024 21:32:31 INFO: Generating Admin certificates.
30/11/2024 21:32:31 INFO: Admin certificates created.
30/11/2024 21:32:31 INFO: Generating Wazuh indexer certificates.
30/11/2024 21:32:31 INFO: Wazuh indexer certificates created.
30/11/2024 21:32:31 INFO: Generating Filebeat certificates.
30/11/2024 21:32:31 INFO: Wazuh Filebeat certificates created.
30/11/2024 21:32:31 INFO: Generating Wazuh dashboard certificates.
30/11/2024 21:32:31 INFO: Wazuh dashboard certificates created.
Moving created certificates to the destination directory
Changing certificate permissions
Setting UID indexer and dashboard
Setting UID for wazuh manager and worker
[lucian@centos single-node]$
```
