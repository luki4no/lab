Source: [Wazuh - Deployment on Docker](https://documentation.wazuh.com/current/deployment-options/docker/index.html)

# Benutze VM

> 192.168.100.10   centos

# Anpassungen

Docker und Docker-Compose haben wir schon mit Greenbone implementiert. In diesem Dokument werde ich nur die auszuführenden Kommandos notieren; die Details finden wir auf der oben genannten öffentlichen Website.

# Docker-Host 'centos' vorbereiten
```bash
sudo sysctl -w vm.max_map_count=262144
```
```bash
echo 'vm.max_map_count = 262144' | sudo tee -a /etc/sysctl.conf
```

# Wazuh Docker-Bereitstellung (Einzelknoten)

## Klone das Wazuh-Repository auf dein System und starte die Installation. 

```bash
cd ~
```
```bash
git clone https://github.com/wazuh/wazuh-docker.git -b v4.9.2
```
```bash
cd ~/wazuh-docker/single-node/
```

## Generiere self-signed certificates für jeden Cluster-Knoten (ohne Proxy)

Wir haben ein Docker-Image erstellt, um die Zertifikatserstellung mit dem Wazuh-Certs-Gen-Tool zu automatisieren.

```bash
nano generate-indexer-certs.yml
```
```yaml
# Wazuh App Copyright (C) 2017 Wazuh Inc. (License GPLv2)
version: '3'

services:
  generator:
    image: wazuh/wazuh-certs-generator:0.0.2
    hostname: wazuh-certs-generator
    volumes:
      - ./config/wazuh_indexer_ssl_certs/:/certificates/
      - ./config/certs.yml:/config/certs.yml
    environment:
      - HTTP_PROXY=YOUR_PROXY_ADDRESS_OR_DNS
```
