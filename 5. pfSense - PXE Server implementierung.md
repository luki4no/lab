# ISO Dateien auf pfsense transferieren

```powershell
ssh admin@192.168.100.2 mkdir -p /usr/local/www/iso
```
```powershell
cd C:\lab\vm\iso-images
```
```powershell
scp "C:\lab\vm\iso-images\*" admin@192.168.100.2:/usr/local/www/iso
```
```powershell
ssh admin@192.168.100.2 ls -l /usr/local/www/iso
```

# PXE Dienste

Ein PXE-Server (Preboot Execution Environment) benötigt mehrere wichtige Dienste, um das Netzwerk-Booten und die OS-Installation zu ermöglichen:

1. **DHCP-Server**: Stellt dem Client die Netzwerkkonfiguration bereit, wie z.B. die IP-Adresse, das Gateway und den Speicherort der Boot-Datei.

2. **TFTP-Server**: Überträgt die Boot-Dateien (z.B. `pxelinux.0`, `grubx64.efi`, `vmlinuz`, `initrd.img`) mithilfe des Trivial File Transfer Protocol an den Client.

3. **NFS-, HTTP- oder FTP-Server**: Hält die Installationsmedien des Betriebssystems oder Kickstart/Preseed-Dateien bereit, damit der Client die erforderlichen Dateien herunterladen kann, um die OS-Installation abzuschließen.

4. **Optional: DNS**: Nützlich, wenn die Installation oder Netzwerkkonfiguration eine Namensauflösung erfordert, aber nicht zwingend notwendig für ein grundlegendes PXE-Boot.

Diese Dienste arbeiten zusammen, um ein nahtloses Booten und Installieren über das Netzwerk zu ermöglichen.

## DHCP ist schon implementiert - bestätigen

```plaintext
webConfigurator http://192.168.100.2/
Services > DHCP Server > LAN
```

* General DHCP Options
  * - [x] Enable DHCP server on LAN interface
* Primary Address Pool: 
* Subnet: `192.168.100.0/24`
* Subnet Range: `192.168.100.1 - 192.168.100.254`
* Address Pool Range: `From 192.168.100.100 To 192.168.100.200`
* Server Options
  * DNS Servers: `1.1.1.1`
  * DNS Servers: `1.0.0.1`
* Other DHCP Options
  * TFTP > Display Advanced
    * TFTP Server: `192.168.100.2`
  * Network Booting > Display Advanced
    * Enable: `- [x] Enable Network Booting`
    * Next Server: `192.168.100.2`
    * Default BIOS File Name: `pxelinux.0`
    * UEFI 64 bit File Name: `efi/boot/grubx64.efi`
    * UEFI 64 bit File Name: `http://192.168.100.10/iso`
  * Custom DHCP Options > Display Advanced
    * Custom Option:
      * Number: `66`
      * Type: `Text`
      * Value: `192.168.100.2`
    * `+ Add Custom Option`
    * Custom Option:
      * Number: `67`
      * Type: `Text`
      * Value: Für BIOS: `pxelinux.0` Für EFI: `efi/boot/grubx64.efi`
 * Save
 * Apply Changes

NOTE:
Unser TFTP Server, was wir als nächstes einstellen werden, nutzt den Root Ordner: `/var/lib/tftpboot/`
`efi/boot/grubx64.efi` ist im absoluten Pfad: `/var/lib/tftpboot/efi/boot/grubx64.efi`
`pxelinux.0` ist im absoluten Pfad: `/var/lib/tftpboot/pxelinux.0`

## TFTP installieren

```plaintext
webConfigurator http://192.168.100.2/
System > Package Manager > Available Packages > 
```

* Search term: tftp
* Search
* Packages: tftpd
* `+ Install`
* Confirm

TFTP Root Ordner wird standardmäßig dieser sein: /var/lib/tftpboot/



